"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[106],{32857:function(se,b){var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};b.Z=n},11396:function(se,b,n){n.r(b);var u=n(15009),O=n.n(u),I=n(99289),R=n.n(I),w=n(19632),M=n.n(w),J=n(97857),g=n.n(J),K=n(5574),D=n.n(K),Q=n(2618),Y=n(55102),q=n(71471),L=n(2453),j=n(4393),ee=n(64218),te=n(42075),B=n(83622),oe=n(47221),C=n(67294),a=n(85893),Ee=Y.Z.TextArea,ie=q.Z.Title,o=q.Z.Text,_=function(){var f=(0,C.useState)({}),m=D()(f,2),l=m[0],Z=m[1],ue=(0,C.useState)(!1),ne=D()(ue,2),le=ne[0],T=ne[1],z=(0,C.useState)(!1),de=D()(z,2),ce=de[0],re=de[1],_e=(0,C.useState)(null),N=D()(_e,2),A=N[0],fe=N[1],y=(0,C.useRef)({});(0,C.useEffect)(function(){T(!0),(0,Q.CZ)().then(function(d){Z(d||{})}).catch(function(d){console.error("Failed to load menu:",d)}).finally(function(){T(!1)})},[]);var ve=function(t){if(t.startsWith("page")){var e=t.replace("page","");return"\u7B2C".concat(e,"\u9875")}return t},me=function(t){if(t.startsWith("\u5E8F\u53F7")){var e=t.replace("\u5E8F\u53F7","");return"\u7B2C".concat(e,"\u680F")}return t},V=function(t){if(!t||!t.\u5185\u5BB9\u6587\u672C)return"";var e="";return Array.isArray(t.\u5185\u5BB9\u6587\u672C)?e=t.\u5185\u5BB9\u6587\u672C[0]||"":e=t.\u5185\u5BB9\u6587\u672C||"",typeof e!="string"&&(e=String(e)),e.replace(/\\n/g,`
`)},S=function(t,e,i){var r=g()({},l),E=i.replace(/\n/g,"\\n");r[t][e].\u5185\u5BB9\u6587\u672C=[E],Z(r)},H=function(t,e){var i="".concat(t,"-").concat(e);fe(i)},F=function(t,e){var i=g()({},l);delete i[t][e],Z(i)},U=function(t){var e=g()({},l),i=Object.keys(e[t]),r=Math.max.apply(Math,M()(i.map(function(x){var P=x.match(/序号(\d+)/);return P?parseInt(P[1]):0}))),E="\u5E8F\u53F7".concat(r+1);e[t][E]={\u7C7B\u578B:"\u6587\u5B57",\u5185\u5BB9\u6587\u672C:[""]},Z(e)},he=function(t){var e=g()({},l),i=Object.keys(e[t]),r=Math.max.apply(Math,M()(i.map(function(x){var P=x.match(/序号(\d+)/);return P?parseInt(P[1]):0}))),E="\u5E8F\u53F7".concat(r+1);e[t][E]={\u7C7B\u578B:"\u6587\u5B57",\u5185\u5BB9\u6587\u672C:""},Z(e)},W=function(t){return t&&typeof t.\u5185\u5BB9\u6587\u672C=="string"&&t.\u5185\u5BB9\u6587\u672C.trim()===""},p=function(){var d=R()(O()().mark(function t(){var e;return O()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return re(!0),r.prev=1,r.next=4,(0,Q._8)(l);case 4:e=r.sent,e.message?L.ZP.success(e.message):e.error&&L.ZP.error(e.error),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),L.ZP.error("\u83DC\u5355\u4FDD\u5B58\u5931\u8D25");case 11:return r.prev=11,re(!1),r.finish(11);case 14:case"end":return r.stop()}},t,null,[[1,8,11,14]])}));return function(){return d.apply(this,arguments)}}(),G=function(t){if(A){var e=A.split("-"),i=D()(e,2),r=i[0],E=i[1],x=y.current[A];if(x){var P=V(l[r][E]),$=x.resizableTextArea.textArea.selectionStart,ae="[".concat(t,"]"),h="[/".concat(t,"]"),c=P.slice(0,$)+ae+h+P.slice($);S(r,E,c),setTimeout(function(){var s=$+ae.length;x.resizableTextArea.textArea.setSelectionRange(s,s),x.focus()},0)}}},Pe=function(t){if(!t)return null;var e=t.replace(/\\n/g,`
`),i=/\[title\](.*?)\[\/title\]/g;e=e.replace(i,function(x,P){return'<span style="font-weight: bold; font-size: 24px;">'.concat(P,"</span>")});var r=/\[name\](.*?)\[\/name\]/g;e=e.replace(r,function(x,P){return'<div style="font-weight: bold; font-size: 24px;">'.concat(P,"</div>")});var E=/\[des\](.*?)\[\/des\]/g;return e=e.replace(E,function(x,P){return'<span style="color: #888; font-size: 12px;">'.concat(P,"</span>")}),e=e.replace(/\n/g,"<br>"),(0,a.jsx)("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:e}})};return(0,a.jsxs)(j.Z,{loading:le,children:[(0,a.jsx)(ee.Z,{offsetTop:60,children:(0,a.jsxs)(te.Z,{wrap:!0,direction:"horizontal",style:{borderRadius:8,backdropFilter:"blur(8px)",padding:10,boxShadow:"0 0 10px rgba(112, 112, 112, 0.63)",width:"100%",marginBottom:20},children:["\u63D2\u5165\u6807\u7B7E\uFF1A",(0,a.jsx)(B.ZP,{type:"primary",disabled:!A,onClick:function(){return G("title")},children:"\u6807\u9898"}),(0,a.jsx)(B.ZP,{type:"primary",disabled:!A,onClick:function(){return G("des")},children:"\u63CF\u8FF0"}),"\u64CD\u4F5C\uFF1A",(0,a.jsx)(B.ZP,{type:"primary",loading:ce,onClick:p,style:{float:"right"},children:"\u4FDD\u5B58\u83DC\u5355"})]})}),(0,a.jsx)("div",{children:function(){var d=Object.keys(l).map(function(t){return{key:t,label:ve(t),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{marginBottom:16},children:Object.keys(l[t]).map(function(e){return(0,a.jsx)(j.Z,{style:{marginBottom:16},children:(0,a.jsxs)(te.Z,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,a.jsx)(o,{strong:!0,children:me(e)})}),W(l[t][e])?(0,a.jsx)("div",{style:{textAlign:"center"},children:"---\u5360\u4F4D\u7A7A\u884C---"}):(0,a.jsxs)("div",{children:[l[t][e].\u56FE\u7247\u94FE\u63A5&&(0,a.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"4px",fontWeight:"bold"},children:[l[t][e].\u7C7B\u578B,(0,a.jsx)("br",{}),"\u56FE\u7247\u94FE\u63A5\uFF1A"]}),(0,a.jsx)(Y.Z,{value:l[t][e].\u56FE\u7247\u94FE\u63A5||"",onChange:function(r){var E=g()({},l);E[t][e].\u56FE\u7247\u94FE\u63A5=r.target.value,Z(E)},placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u94FE\u63A5URL"})]}),"\u6587\u672C\u5185\u5BB9\uFF1A",(0,a.jsx)(Ee,{ref:function(r){r&&(y.current["".concat(t,"-").concat(e)]=r)},autoSize:{maxRows:20},value:V(l[t][e]),onChange:function(r){return S(t,e,r.target.value)},onFocus:function(){return H(t,e)},placeholder:"\u8F93\u5165\u5185\u5BB9\uFF0C\u4F7F\u7528[title]\u6807\u9898[/title]\u548C[des]\u63CF\u8FF0[/des]\u6807\u8BB0"})]})]})},e)})}),(0,a.jsxs)("div",{style:{marginTop:16},children:[(0,a.jsx)(ie,{level:4,children:"\u9875\u9762\u9884\u89C8"}),(0,a.jsx)(j.Z,{children:Object.keys(l[t]).map(function(e){var i=V(l[t][e]);return i.trim()===""?(0,a.jsx)("div",{style:{marginBottom:16}},e):(0,a.jsxs)(j.Z,{style:{marginBottom:16,boxShadow:"0 0 10px rgba(112, 112, 112, 0.63)"},children:[(0,a.jsx)("span",{style:{fontSize:"20px"}}),(0,a.jsx)("div",{style:{marginTop:8},children:Pe(i)})]},e)})})]})]})}});return(0,a.jsx)(oe.Z,{items:d,defaultActiveKey:Object.keys(l).length>0?[Object.keys(l)[0]]:[],style:{marginBottom:16}})}()})]})};b.default=_},64218:function(se,b,n){n.d(b,{Z:function(){return ie}});var u=n(67294),O=n(93967),I=n.n(O),R=n(9220),w=n(74902),M=n(75164);function J(o){let _=null;const v=m=>()=>{_=null,o.apply(void 0,(0,w.Z)(m))},f=(...m)=>{_===null&&(_=(0,M.Z)(v(m)))};return f.cancel=()=>{M.Z.cancel(_),_=null},f}var g=J,K=n(53124),D=n(83559);const Q=o=>{const{componentCls:_}=o;return{[_]:{position:"fixed",zIndex:o.zIndexPopup}}},Y=o=>({zIndexPopup:o.zIndexBase+10});var q=(0,D.I$)("Affix",Q,Y);function L(o){return o!==window?o.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function j(o,_,v){if(v!==void 0&&Math.round(_.top)>Math.round(o.top)-v)return v+_.top}function ee(o,_,v){if(v!==void 0&&Math.round(_.bottom)<Math.round(o.bottom)+v){const f=window.innerHeight-_.bottom;return v+f}}var te=function(o,_){var v={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&_.indexOf(f)<0&&(v[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,f=Object.getOwnPropertySymbols(o);m<f.length;m++)_.indexOf(f[m])<0&&Object.prototype.propertyIsEnumerable.call(o,f[m])&&(v[f[m]]=o[f[m]]);return v};const B=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function oe(){return typeof window!="undefined"?window:null}const C=0,a=1;var ie=u.forwardRef((o,_)=>{var v;const{style:f,offsetTop:m,offsetBottom:l,prefixCls:Z,className:ue,rootClassName:ne,children:le,target:T,onChange:z,onTestUpdatePosition:de}=o,ce=te(o,["style","offsetTop","offsetBottom","prefixCls","className","rootClassName","children","target","onChange","onTestUpdatePosition"]),{getPrefixCls:re,getTargetContainer:_e}=u.useContext(K.E_),N=re("affix",Z),[A,fe]=u.useState(!1),[y,ve]=u.useState(),[me,V]=u.useState(),S=u.useRef(C),H=u.useRef(null),F=u.useRef(null),U=u.useRef(null),he=u.useRef(null),W=u.useRef(null),p=(v=T!=null?T:_e)!==null&&v!==void 0?v:oe,G=l===void 0&&m===void 0?0:m,Pe=()=>{if(S.current!==a||!he.current||!U.current||!p)return;const h=p();if(h){const c={status:C},s=L(U.current);if(s.top===0&&s.left===0&&s.width===0&&s.height===0)return;const X=L(h),k=j(s,X,G),xe=ee(s,X,l);k!==void 0?(c.affixStyle={position:"fixed",top:k,width:s.width,height:s.height},c.placeholderStyle={width:s.width,height:s.height}):xe!==void 0&&(c.affixStyle={position:"fixed",bottom:xe,width:s.width,height:s.height},c.placeholderStyle={width:s.width,height:s.height}),c.lastAffix=!!c.affixStyle,A!==c.lastAffix&&(z==null||z(c.lastAffix)),S.current=c.status,ve(c.affixStyle),V(c.placeholderStyle),fe(c.lastAffix)}},d=()=>{S.current=a,Pe()},t=g(()=>{d()}),e=g(()=>{if(p&&y){const h=p();if(h&&U.current){const c=L(h),s=L(U.current),X=j(s,c,G),k=ee(s,c,l);if(X!==void 0&&y.top===X||k!==void 0&&y.bottom===k)return}}d()}),i=()=>{const h=p==null?void 0:p();h&&(B.forEach(c=>{var s;F.current&&((s=H.current)===null||s===void 0||s.removeEventListener(c,F.current)),h==null||h.addEventListener(c,e)}),H.current=h,F.current=e)},r=()=>{const h=p==null?void 0:p();B.forEach(c=>{var s;h==null||h.removeEventListener(c,e),F.current&&((s=H.current)===null||s===void 0||s.removeEventListener(c,F.current))}),t.cancel(),e.cancel()};u.useImperativeHandle(_,()=>({updatePosition:t})),u.useEffect(()=>(W.current=setTimeout(i),()=>{W.current&&(clearTimeout(W.current),W.current=null),r()}),[]),u.useEffect(()=>(i(),()=>r()),[T,y,A,m,l]),u.useEffect(()=>{t()},[T,m,l]);const[E,x,P]=q(N),$=I()(ne,x,N,P),ae=I()({[$]:y});return E(u.createElement(R.Z,{onResize:t},u.createElement("div",Object.assign({style:f,className:ue,ref:U},ce),y&&u.createElement("div",{style:me,"aria-hidden":"true"}),u.createElement("div",{className:ae,ref:he,style:y},u.createElement(R.Z,{onResize:t},le)))))})},64894:function(se,b,n){var u=n(87462),O=n(67294),I=n(32857),R=n(93771),w=function(g,K){return O.createElement(R.Z,(0,u.Z)({},g,{ref:K,icon:I.Z}))},M=O.forwardRef(w);b.Z=M}}]);
