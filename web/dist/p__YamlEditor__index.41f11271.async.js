"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[445],{43151:function(We,B,s){var Q=s(97857),p=s.n(Q),G=s(13769),b=s.n(G),H=s(67294),E=s(31093),W=s(85893),v=["children","type","delay","duration","className","style","component"],k=function(i){var o=100;switch(i){case"top":return{hidden:{opacity:0,y:-o},visible:{opacity:1,y:0}};case"bottom":return{hidden:{opacity:0,y:o},visible:{opacity:1,y:0}};case"left":return{hidden:{opacity:0,x:-o},visible:{opacity:1,x:0}};case"right":return{hidden:{opacity:0,x:o},visible:{opacity:1,x:0}};case"scale":return{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}};case"alpha":default:return{hidden:{opacity:0},visible:{opacity:1}}}},y=function(i){var o=i.children,M=i.type,O=M===void 0?"right":M,T=i.delay,X=T===void 0?0:T,R=i.duration,Z=R===void 0?500:R,f=i.className,q=i.style,D=i.component,A=D===void 0?"div":D,ee=b()(i,v),ne=H.Children.toArray(o),re=Array.isArray(O)?O[0]:O,I=k(re),ae=E.E[A]||(0,E.E)(A);return(0,W.jsx)(ae,p()(p()({className:f,style:q},ee),{},{children:ne.map(function(U,K){var te=(X+K*100)/1e3,w=Z/1e3;return(0,W.jsx)(E.E.div,{initial:I.hidden,animate:I.visible,transition:{delay:te,duration:w,ease:"backOut"},children:U},U.key||K)})}))};B.Z=y},5578:function(We,B,s){s.r(B);var Q=s(19632),p=s.n(Q),G=s(97857),b=s.n(G),H=s(52677),E=s.n(H),W=s(15009),v=s.n(W),k=s(99289),y=s.n(k),J=s(5574),i=s.n(J),o=s(67294),M=s(46004),O=s(2453),T=s(57478),X=s(85721),R=s(84567),Z=s(34586),f=s(71577),q=s(86738),D=s(2487),A=s(45416),ee=s(74330),ne=s(64218),re=s(34041),I=s(88556),ae=s(82061),U=s(51042),K=s(13982),te=s(34804),w=s(40110),N=s(2618),S=s(84226),Te=s(43151),a=s(85893),V=M.Z.TextArea,Re=function(){var Ue=O.ZP.useMessage(),ce=i()(Ue,2),m=ce[0],Ke=ce[1],we=(0,S.useParams)(),j=we.fileName,Ne=(0,o.useState)([]),me=i()(Ne,2),F=me[0],Ve=me[1],ze=(0,o.useState)(""),he=i()(ze,2),z=he[0],Y=he[1],Ye=(0,o.useState)({}),fe=i()(Ye,2),L=fe[0],Ee=fe[1],$e=(0,o.useState)(!1),ve=i()($e,2),Qe=ve[0],Pe=ve[1],Ge=(0,o.useState)(!1),pe=i()(Ge,2),He=pe[0],De=pe[1],ke=(0,o.useState)(!1),ge=i()(ke,2),Je=ge[0],be=ge[1],Xe=(0,o.useState)(""),Ce=i()(Xe,2),se=Ce[0],qe=Ce[1],en=(0,o.useState)([]),ye=i()(en,2),Ze=ye[0],je=ye[1],nn=(0,o.useState)(!1),Le=i()(nn,2),rn=Le[0],x=Le[1],an=(0,o.useState)(!1),Me=i()(an,2),tn=Me[0],ue=Me[1],sn=(0,o.useState)(""),Oe=i()(sn,2),ie=Oe[0],le=Oe[1],un=(0,o.useState)(""),Ae=i()(un,2),ln=Ae[0],_n=Ae[1],on=(0,o.useState)([]),Ie=i()(on,2),_e=Ie[0],dn=Ie[1],cn=(0,o.useState)({}),Se=i()(cn,2),C=Se[0],oe=Se[1],mn=function(){var l=y()(v()().mark(function t(){var e;return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,N.fV)();case 3:e=n.sent,e.files?(Ve(e.files),e.files.length>0&&(Y(e.files[0]),$(e.files[0]))):m.error("\u914D\u7F6E\u6587\u4EF6\u5217\u8868\u52A0\u8F7D\u5931\u8D25"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),m.error("\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u65F6\u51FA\u9519: "+n.t0);case 10:case"end":return n.stop()}},t,null,[[0,7]])}));return function(){return l.apply(this,arguments)}}(),$=function(){var l=y()(v()().mark(function t(e){var u;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,Pe(!0),r.next=4,(0,N.hq)(e);case 4:u=r.sent,u?(Ee(u),u.error&&m.error("\u9519\u8BEF\uFF1A".concat(u.error))):m.error("\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),m.error("\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u51FA\u9519: "+r.t0);case 11:return r.prev=11,Pe(!1),r.finish(11);case 14:case"end":return r.stop()}},t,null,[[0,8,11,14]])}));return function(e){return l.apply(this,arguments)}}(),hn=function l(t){if(Array.isArray(t))return t.map(function(n){return typeof n=="string"&&!isNaN(Number(n))&&n.trim()!==""?Number(n):E()(n)==="object"&&n!==null?l(n):n});if(E()(t)==="object"&&t!==null){var e={};for(var u in t)t.hasOwnProperty(u)&&(e[u]=l(t[u]));return e}return t},fn=function(){var l=y()(v()().mark(function t(){var e,u;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,De(!0),e=b()({},L),e.data&&(e.data=hn(e.data)),r.next=6,(0,N.sC)(z,e);case 6:u=r.sent,u.message?m.success("\u914D\u7F6E\u6587\u4EF6\u4FDD\u5B58\u6210\u529F"):m.error(u.error||"\u4FDD\u5B58\u5931\u8D25"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),m.error("\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6\u65F6\u51FA\u9519: "+r.t0);case 13:return r.prev=13,De(!1),r.finish(13);case 16:case"end":return r.stop()}},t,null,[[0,10,13,16]])}));return function(){return l.apply(this,arguments)}}(),g=function(t,e){for(var u=t.split("."),n=b()({},L),r=n.data||n,h=0;h<u.length-1;h++){var c=u[h];if(c.includes("[")){var d=c.split("["),_=i()(d,2),P=_[0],xe=_[1],gn=parseInt(xe.replace("]",""),10);r=r[P][gn]}else r=r[c]}var de=u[u.length-1];if(de.includes("[")){var bn=de.split("["),Be=i()(bn,2),Cn=Be[0],yn=Be[1],Zn=parseInt(yn.replace("]",""),10);r[Cn][Zn]=e}else r[de]=e;Ee(n)},En=function(t,e){_n(t),dn(e),le(""),ue(!0)},vn=function(){if(!ie.trim()){m.warning("\u8BF7\u8F93\u5165\u8981\u6DFB\u52A0\u7684\u5185\u5BB9\uFF01");return}var t=ie.split(`
`).filter(function(u){return u.trim()!==""}),e=t.map(function(u){return _e.length>0&&E()(_e[0])==="object"?{}:u.trim()});g(ln,[].concat(p()(_e),p()(e))),ue(!1),le(""),m.success("\u6210\u529F\u6DFB\u52A0 ".concat(e.length," \u9879"))},Pn=function l(t,e){if(typeof t=="boolean")return(0,a.jsx)(T.Z,{checked:t,checkedChildren:"\u5F00",unCheckedChildren:"\u5173",onChange:function(r){return g(e,r)}});if(typeof t=="string")return(0,a.jsx)(V,{value:t,onChange:function(r){return g(e,r.target.value)},autoSize:{minRows:1,maxRows:5}});if(typeof t=="number")return(0,a.jsx)(X.Z,{type:"number",value:t,style:{width:"100%"},onChange:function(r){r==null||g(e,r)}});if(Array.isArray(t)){var u;return(0,a.jsxs)("div",{className:"array-container",children:[t.map(function(n,r){var h;return(0,a.jsxs)("div",{className:"array-item",children:[(0,a.jsx)(R.Z,{checked:((h=C[e])===null||h===void 0?void 0:h[r])||!1,onChange:function(d){var _=b()({},C);_[e]||(_[e]=Array(t.length).fill(!1)),_[e][r]=d.target.checked,oe(_)}}),n===null?(0,a.jsx)(V,{value:n,onChange:function(d){var _=p()(t);_[r]=d.target.value,g(e,_)},autoSize:{minRows:1,maxRows:5}}):E()(n)==="object"?(0,a.jsx)("div",{className:"nested-object",style:{flex:1},children:Object.entries(n).map(function(c){var d=i()(c,2),_=d[0],P=d[1];return(0,a.jsxs)("div",{className:"object-item",children:[(0,a.jsxs)("strong",{children:[_,":"]}),(0,a.jsx)("div",{style:{marginLeft:"10px"},children:l(P,"".concat(e,"[").concat(r,"].").concat(_))})]},_)})}):(0,a.jsx)(V,{value:n,onChange:function(d){var _=p()(t);_[r]=d.target.value,g(e,_)},autoSize:{minRows:1,maxRows:5}})]},r)}),(0,a.jsxs)(Z.Z,{wrap:!0,children:[(0,a.jsx)(f.ZP,{type:"dashed",onClick:function(){var r,h=b()({},C),c=((r=C[e])===null||r===void 0?void 0:r.every(function(d){return d}))||!1;h[e]=Array(t.length).fill(!c),oe(h)},children:(u=C[e])!==null&&u!==void 0&&u.every(function(n){return n})?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009"}),(0,a.jsx)(q.Z,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",placement:"topRight",onConfirm:function(){var r,h=((r=C[e])===null||r===void 0?void 0:r.map(function(_,P){return _?P:-1}).filter(function(_){return _!==-1}))||[];if(t.length-h.length<1){m.warning("\u81F3\u5C11\u9700\u8981\u4FDD\u7559\u4E00\u9879");return}if(h.length===0){m.warning("\u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879");return}var c=t.filter(function(_,P){return!h.includes(P)});g(e,c);var d=b()({},C);d[e]=Array(c.length).fill(!1),oe(d),m.success("\u6210\u529F\u5220\u9664 ".concat(h.length," \u9879"))},okText:"\u662F",cancelText:"\u5426",children:(0,a.jsxs)(f.ZP,{type:"dashed",danger:!0,children:[(0,a.jsx)(ae.Z,{}),"\u5220\u9664\u9009\u4E2D"]})}),(0,a.jsx)(f.ZP,{type:"dashed",icon:(0,a.jsx)(U.Z,{}),onClick:function(){var r=E()(t[0])==="object"?{}:"";g(e,[].concat(p()(t),[r]))},children:"\u6DFB\u52A0\u4E00\u9879"}),(0,a.jsx)(f.ZP,{type:"dashed",icon:(0,a.jsx)(K.Z,{}),onClick:function(){En(e,t)},children:"\u6279\u91CF\u6DFB\u52A0"})]})]})}return null},pn=function l(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",r=u[n]||Object.keys(t);return(0,a.jsx)(D.Z,{dataSource:r,bordered:!1,split:!1,renderItem:function(c){var d=t[c],_=n?"".concat(n,".").concat(c):c,P=e[_];return(0,a.jsx)(D.Z.Item,{className:"yaml-item",id:"yaml-item-".concat(_),children:(0,a.jsxs)(A.Z,{style:{padding:0},className:"yaml-content",children:[(0,a.jsxs)("div",{className:"key-container",children:[(0,a.jsxs)("strong",{style:{fontSize:"1.2rem"},children:[c,":"]}),P&&(0,a.jsx)("span",{style:{textIndent:"1em",opacity:.8,overflow:"visible",textOverflow:"unset",whiteSpace:"normal",display:"block",maxWidth:"100%"},className:"comment",dangerouslySetInnerHTML:{__html:P.replace(/((?:https?:\/\/)?(?:(?:[a-z0-9]?(?:[a-z0-9\-]{1,61}[a-z0-9])?\.[^\.|\s])+[a-z\.]*[a-z]+|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3})(?::\d{1,5})*[a-z0-9.,_\/~#&=;%+?\-\\(\\)]*)/gi,'<a href="$&" target="_blank" style="word-break: break-all;">$&</a>')}})]}),n==="help_menu"&&c==="content"?(0,a.jsx)(f.ZP,{type:"primary",onClick:function(){S.history.push("/menuEditor")},children:"\u524D\u5F80\u83DC\u5355\u7F16\u8F91\u5668\u4FEE\u6539"}):E()(d)==="object"&&!Array.isArray(d)?(0,a.jsx)("div",{className:"nested-object",children:l(d,e,u,_)}):Pn(d,_)]})})}})};(0,o.useEffect)(function(){mn().then(function(){!j&&F.length>0&&S.history.replace("/configEditor/".concat(z))})},[]),(0,o.useEffect)(function(){j&&F.length>0&&F.includes(j)&&(Y(j),$(j))},[j,F]);var Fe=function(){var l=y()(v()().mark(function t(){var e;return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(se.trim()){n.next=3;break}return m.warning("\u8BF7\u5148\u8F93\u5165\u8981\u641C\u7D22\u7684\u5185\u5BB9"),n.abrupt("return");case 3:return n.prev=3,be(!0),n.next=7,(0,N.yz)(se.trim());case 7:e=n.sent,e.results?(je(e.results),x(!0)):e.error?m.error(e.error):(je([]),x(!0),m.info("\u672A\u627E\u5230\u5339\u914D\u9879")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),m.error("\u641C\u7D22\u65F6\u51FA\u9519: "+n.t0);case 14:return n.prev=14,be(!1),n.finish(14);case 17:case"end":return n.stop()}},t,null,[[3,11,14,17]])}));return function(){return l.apply(this,arguments)}}(),Dn=function(){return(0,a.jsx)(D.Z,{dataSource:Ze,renderItem:function(e){return(0,a.jsxs)(D.Z.Item,{children:[(0,a.jsx)(D.Z.Item.Meta,{title:(0,a.jsxs)("div",{children:["\u8DEF\u5F84\uFF1A",e.path]}),description:(0,a.jsxs)("div",{children:["\u6587\u4EF6\uFF1A",e.file]})}),(0,a.jsx)(f.ZP,{type:"primary",onClick:function(){if(z!==e.file)Y(e.file),$(e.file).then(function(){setTimeout(function(){var r=document.getElementById("yaml-item-".concat(e.path));r&&r.scrollIntoView({behavior:"smooth",block:"center"})},300)}),S.history.push("/configEditor/".concat(e.file,"?path=").concat(e.path));else{var n=document.getElementById("yaml-item-".concat(e.path));n?n.scrollIntoView({behavior:"smooth",block:"center"}):m.error("\u672A\u627E\u5230\u5BF9\u5E94\u4F4D\u7F6E")}x(!1)},children:"\u8DF3\u8F6C"})]},e.path)}})};return(0,a.jsx)(Te.Z,{type:"bottom",delay:100,children:(0,a.jsxs)(ee.Z,{spinning:Qe,size:"large",children:[Ke,(0,a.jsx)(A.Z,{style:{padding:0},children:(0,a.jsxs)("div",{className:"yaml-editor",children:[(0,a.jsx)(ne.Z,{offsetTop:60,children:(0,a.jsx)("div",{className:"file-controls",children:(0,a.jsxs)(Z.Z,{wrap:!0,direction:"horizontal",style:{borderRadius:8,backdropFilter:"blur(8px)",padding:10,boxShadow:"0 0 10px rgba(112, 112, 112, 0.63)",width:"100%"},children:[(0,a.jsx)(re.Z,{style:{width:"320px"},value:z||void 0,placeholder:"\u9009\u62E9\u6587\u4EF6",onChange:function(t){Y(t),$(t),S.history.push("/configEditor/".concat(t)),window.scrollTo({top:0,behavior:"smooth"})},suffixIcon:(0,a.jsx)(te.Z,{}),options:F.map(function(l){return{value:l,label:l}})}),(0,a.jsx)(f.ZP,{type:"primary",onClick:fn,loading:He,children:"\u4FDD\u5B58\u914D\u7F6E"}),(0,a.jsxs)(f.ZP,{type:"primary",onClick:function(){return x(!0)},children:[(0,a.jsx)(w.Z,{}),"\u641C\u7D22\u914D\u7F6E\u9879"]})]})})}),(0,a.jsx)("div",{className:"editor-content",children:L.data&&pn(L.data,L.comments,L.order)}),(0,a.jsx)(I.Z,{title:"\u6279\u91CF\u6DFB\u52A0",open:tn,onOk:vn,onCancel:function(){return ue(!1)},width:600,okText:"\u6DFB\u52A0",cancelText:"\u53D6\u6D88",children:(0,a.jsx)(V,{value:ie,onChange:function(t){return le(t.target.value)},placeholder:"\u8BF7\u8F93\u5165\u8981\u6DFB\u52A0\u7684\u6570\u636E\uFF0C\u56DE\u8F66\u6362\u884C\uFF0C\u6BCF\u884C\u4E00\u9879",autoSize:{minRows:5,maxRows:20},style:{width:"100%"}})}),(0,a.jsx)(I.Z,{title:"\u641C\u7D22\u914D\u7F6E\u9879",open:rn,onCancel:function(){return x(!1)},width:800,footer:null,children:(0,a.jsxs)(Z.Z,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(M.Z,{prefix:(0,a.jsx)(w.Z,{}),placeholder:"\u641C\u7D22\u914D\u7F6E\u9879...",value:se,onChange:function(t){return qe(t.target.value)},onPressEnter:Fe,style:{width:"100%"}}),(0,a.jsx)(f.ZP,{type:"primary",onClick:Fe,loading:Je,children:"\u641C\u7D22"})]}),(0,a.jsx)("div",{children:"\u63D0\u793A\uFF1A\u641C\u7D22\u8303\u56F4\u5305\u62EC\u5176\u5B83\u914D\u7F6E\u6587\u4EF6\uFF0C\u82E5\u5BF9\u5F53\u524D\u914D\u7F6E\u6587\u4EF6\u6709\u4FEE\u6539\uFF0C\u8BF7\u5148\u4FDD\u5B58\u540E\u518D\u8DF3\u8F6C\u3002"}),(0,a.jsx)("div",{style:{marginTop:"20px"},children:Ze.length>0?Dn():(0,a.jsx)("p",{children:"\u672A\u627E\u5230\u5339\u914D\u9879"})})]})}),(0,a.jsx)("style",{children:`
        .yaml-editor {
          // padding: 20px;
        }
        .file-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          display: flex;
          gap: 5px;
          padding: 5px;
        }
        .yaml-item {
          // border: 1px solid #e8e8e8;
          // padding: 5px;
          // margin-bottom: 10px;
          border-radius: 5px;
        }
        .yaml-content {
          width: 100%;
        }
        .key-container {
          margin-bottom: 8px;
        }
        .comment {
          margin-left: 8px;
        }
        .nested-object {
          margin-left: 20px;
        }
        .array-container {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        .array-item {
          display: flex;
          gap: 8px;
          align-items: center;
        }
      `})]})},"a")]})})};B.default=Re}}]);
