"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[341],{43151:function(Se,j,n){var $=n(97857),B=n.n($),z=n(13769),i=n.n(z),a=n(67294),f=n(31093),R=n(85893),L=["children","type","delay","duration","className","style","component"],p=function(u){var v=100;switch(u){case"top":return{hidden:{opacity:0,y:-v},visible:{opacity:1,y:0}};case"bottom":return{hidden:{opacity:0,y:v},visible:{opacity:1,y:0}};case"left":return{hidden:{opacity:0,x:-v},visible:{opacity:1,x:0}};case"right":return{hidden:{opacity:0,x:v},visible:{opacity:1,x:0}};case"scale":return{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}};case"alpha":default:return{hidden:{opacity:0},visible:{opacity:1}}}},I=function(u){var v=u.children,F=u.type,M=F===void 0?"right":F,U=u.delay,Q=U===void 0?0:U,E=u.duration,W=E===void 0?500:E,V=u.className,G=u.style,X=u.component,K=X===void 0?"div":X,J=i()(u,L),r=a.Children.toArray(v),O=Array.isArray(M)?M[0]:M,k=p(O),de=f.E[K]||(0,f.E)(K);return(0,R.jsx)(de,B()(B()({className:V,style:G},J),{},{children:r.map(function(Y,q){var y=(Q+q*100)/1e3,ee=W/1e3;return(0,R.jsx)(f.E.div,{initial:k.hidden,animate:k.visible,transition:{delay:y,duration:ee,ease:"backOut"},children:Y},Y.key||q)})}))};j.Z=I},50666:function(Se,j,n){n.r(j);var $=n(64599),B=n.n($),z=n(5574),i=n.n(z),a=n(67294),f=n(34041),R=n(87600),L=n(27310),p=n(2453),I=n(45416),g=n(34586),u=n(71577),v=n(46004),F=n(74330),M=n(40110),U=n(23430),Q=n(27484),E=n.n(Q),W=n(2618),V=n(86656),G=n(5008),X=n(24078),K=n(84226),J=n(43151),r=n(85893),O=f.Z.Option,k=R.Z.Text,de=L.default.RangePicker,Y=function(){var y,ee=(0,a.useState)([]),ce=i()(ee,2),xe=ce[0],te=ce[1],Te=(0,a.useState)(""),me=i()(Te,2),C=me[0],fe=me[1],je=(0,a.useState)([]),ve=i()(je,2),b=ve[0],Be=ve[1],Re=(0,a.useState)([]),Ee=i()(Re,2),Pe=Ee[0],Ie=Ee[1],Fe=(0,a.useState)(""),he=i()(Fe,2),H=he[0],Ue=he[1],We=(0,a.useState)(""),pe=i()(We,2),Z=pe[0],ne=pe[1],Ke=(0,a.useState)(E()().subtract(30,"minutes")),De=i()(Ke,2),ae=De[0],Ye=De[1],He=(0,a.useState)(E()()),Le=i()(He,2),re=Le[0],we=Le[1],Ne=(0,a.useState)([]),ge=i()(Ne,2),ie=ge[0],$e=ge[1],ze=(0,a.useState)(["ERROR"]),Me=i()(ze,2),se=Me[0],Qe=Me[1],Ve=(0,a.useState)(E()().subtract(30,"minutes")),Oe=i()(Ve,2),A=Oe[0],Ge=Oe[1],Xe=(0,a.useState)(E()()),ye=i()(Xe,2),S=ye[0],Je=ye[1],ke=(0,a.useState)([]),Ce=i()(ke,2),P=Ce[0],qe=Ce[1],et=(0,a.useState)(["ERROR"]),be=i()(et,2),h=be[0],tt=be[1],nt=(0,a.useState)(!1),Ze=i()(nt,2),at=Ze[0],w=Ze[1],N=(0,a.useRef)(null),m=(0,a.useRef)(null),x=(0,a.useRef)(null),rt=(0,K.useModel)("@@initialState"),ue=rt.initialState,s=(ue==null||(y=ue.settings)===null||y===void 0?void 0:y.isDark)||!1;(0,a.useEffect)(function(){(0,W.xA)().then(function(e){if(e&&Array.isArray(e.files)){if(te(e.files),e.files.length>0){var t=e.files[e.files.length-1];fe(t)}}else te([]),p.ZP.error((e==null?void 0:e.error)||"\u670D\u52A1\u5668\u8FD4\u56DE\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E")}).catch(function(e){te([]),p.ZP.error("\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u5931\u8D25: "+e.message)})},[]),(0,a.useEffect)(function(){C&&Ae()},[C]),(0,a.useEffect)(function(){if(N.current){m.current=new V.o({rows:1e4,cols:120,cursorBlink:!0,scrollback:1e6,theme:{background:s?"#1e1e1e":"#fbfbfb",foreground:s?"#d4d4d4":"#000",selectionBackground:s?"#333":"#ccc",cursor:s?"#eee":"#111",red:s?"#ff6f6f":"#ee1111",green:s?"#4cab4c":"#1e9400",yellow:s?"#c3c323":"#e59900"}}),x.current=new G.X,m.current.loadAddon(x.current),m.current.open(N.current),x.current.fit();var e=function(){x.current&&x.current.fit()};return window.addEventListener("resize",e),function(){var t;window.removeEventListener("resize",e),(t=m.current)===null||t===void 0||t.dispose()}}},[N]),(0,a.useEffect)(function(){m.current&&(m.current.options.theme={background:s?"#1e1e1e":"#fbfbfb",foreground:s?"#d4d4d4":"#000",selectionBackground:s?"#333":"#ccc",cursor:s?"#eee":"#111",red:s?"#ff6f6f":"#ee1111",green:s?"#4cab4c":"#1e9400",yellow:s?"#c3c323":"#e59900"})},[s]);var it=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;m.current&&(o&&m.current.clear(),t.forEach(function(c,d){var l,_="";switch(c.level){case"ERROR":_="\x1B[31m";break;case"WARNING":_="\x1B[33m";break;case"INFO":_="\x1B[32m";break;default:_=s?"\x1B[37m":"\x1B[30m"}var D="".concat(_).concat(c.timestamp," ").concat(c.app," ").concat(c.level," ").concat(c.message,"\x1B[0m");(l=m.current)===null||l===void 0||l.write(D+`\r
\r
`)}))},st=function(t){if(!t||typeof t!="string")return[];var o=t.split(`
`).filter(function(oe){return oe.trim()!==""}),c=[],d=null,l=B()(o),_;try{for(l.s();!(_=l.n()).done;){var D=_.value,T=D.split(" - ");T.length>=4?(d&&c.push(d),d={timestamp:T[0]||"",app:T[1]||"",level:T[2]||"",message:T.slice(3).join(" - ")||""}):d?d.message+=`
`+D:D.trim()!==""&&(d={timestamp:"",app:"",level:"",message:D})}}catch(oe){l.e(oe)}finally{l.f()}return d&&c.push(d),c},Ae=function(){C&&(w(!0),(0,W.Bl)({file:C}).then(function(t){if(t&&typeof t=="string"){var o=st(t);Be(o)}else p.ZP.error((t==null?void 0:t.error)||"\u670D\u52A1\u5668\u8FD4\u56DE\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E")}).catch(function(t){p.ZP.error("\u83B7\u53D6\u65E5\u5FD7\u5185\u5BB9\u5931\u8D25: "+t.message)}).finally(function(){w(!1)}))},le=(0,a.useMemo)(function(){var e=b;return A&&S&&(e=e.filter(function(t){var o=E()(t.timestamp,"YYYY-MM-DD HH:mm:ss");return o.isSameOrAfter(A)&&o.isSameOrBefore(S)})),P&&P.length>0&&(e=e.filter(function(t){return P.includes(t.app)})),h&&h.length>0&&(e=e.filter(function(t){return h.includes(t.level)})),e},[b,A,S,P,h]),_e=(0,a.useMemo)(function(){return Z?le.filter(function(e){return e.message.includes(Z)}):le},[le,Z]);(0,a.useEffect)(function(){Ie(_e),it(_e,!0)},[_e]);var ut=function(){w(!0),setTimeout(function(){Ge(ae),Je(re),qe(ie),tt(se),ne(H),w(!1)},500)};(0,a.useEffect)(function(){b.length>0&&ut()},[ae,re,ie,se]);var lt=Array.from(new Set(b.map(function(e){return e.app}))),_t=Array.from(new Set(b.map(function(e){return e.level}))),ot=function(){var t=dt(),o=Pe.map(function(_){return"".concat(_.timestamp," ").concat(_.app," ").concat(_.level," ").concat(_.message)}).join(`

`),c=new Blob([o],{type:"text/plain;charset=utf-8"}),d=URL.createObjectURL(c),l=document.createElement("a");l.href=d,l.download="".concat(t,".log"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(d)},dt=function(){var t="";if(A&&(t+="_".concat(A.format("YYYYMMDD_HHmmss"))),S&&(t+="_".concat(S.format("YYYYMMDD_HHmmss"))),P&&P.length>0&&(t+="_".concat(P.join("_"))),h&&h.length>0&&(t+="_".concat(h.join("_"))),Z){var o=Z.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g,"_");t+="_search_".concat(o)}return t=t.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g,"_"),t};return(0,r.jsx)(J.Z,{type:"bottom",delay:100,children:(0,r.jsx)(I.Z,{children:(0,r.jsxs)(g.Z,{direction:"vertical",style:{width:"100%",marginTop:"20px"},children:[(0,r.jsxs)(g.Z,{wrap:!0,children:[(0,r.jsx)(f.Z,{placeholder:"\u9009\u62E9\u65E5\u5FD7\u6587\u4EF6",style:{width:200},onChange:function(t){return fe(t)},value:C,children:(xe||[]).map(function(e){return(0,r.jsx)(O,{value:e,children:e},e)})}),(0,r.jsx)(u.ZP,{onClick:Ae,type:"primary",children:"\u5237\u65B0\u65E5\u5FD7"})]}),(0,r.jsxs)(g.Z,{wrap:!0,children:[(0,r.jsx)(L.default,{showTime:{format:"HH:mm:ss"},placeholder:"\u5F00\u59CB\u65F6\u95F4",style:{width:200},value:ae,onChange:function(t){return Ye(t)},format:"YYYY-MM-DD HH:mm:ss"}),(0,r.jsx)(L.default,{showTime:{format:"HH:mm:ss"},placeholder:"\u7ED3\u675F\u65F6\u95F4",style:{width:200},value:re,onChange:function(t){return we(t)},format:"YYYY-MM-DD HH:mm:ss"}),(0,r.jsx)(f.Z,{mode:"multiple",placeholder:"\u6A21\u5757\u7B5B\u9009",style:{width:200},value:ie,onChange:function(t){return $e(t)},children:(lt||[]).map(function(e){return(0,r.jsx)(O,{value:e,children:e},e)})}),(0,r.jsx)(f.Z,{mode:"multiple",placeholder:"\u65E5\u5FD7\u7B49\u7EA7\u7B5B\u9009",style:{width:200},value:se,onChange:function(t){return Qe(t)},children:(_t||[]).map(function(e){return(0,r.jsx)(O,{value:e,children:e},e)})}),(0,r.jsx)(v.Z,{placeholder:"\u641C\u7D22\u65E5\u5FD7\u5185\u5BB9...",style:{width:200},prefix:(0,r.jsx)(M.Z,{}),value:H,onChange:function(t){return Ue(t.target.value)},onPressEnter:function(){return ne(H)}}),(0,r.jsx)(u.ZP,{style:{width:60},onClick:function(){return ne(H)},type:"primary",children:"\u641C\u7D22"}),(0,r.jsx)(u.ZP,{style:{width:130},onClick:ot,icon:(0,r.jsx)(U.Z,{}),children:"\u5BFC\u51FA\u5F53\u524D\u65E5\u5FD7"})]}),(0,r.jsx)(F.Z,{spinning:at,delay:200,children:(0,r.jsx)(I.Z,{title:"\u65E5\u5FD7\u5185\u5BB9 (".concat(Pe.length," \u6761\u8BB0\u5F55)"),children:(0,r.jsx)("div",{className:"terminal-container",style:{width:"100%",height:"600px",overflow:"auto",position:"relative"},children:(0,r.jsx)("div",{ref:N,style:{width:"100%",height:"600px",backgroundColor:s?"#1e1e1e":"#ffffff",padding:"-5px",overflow:"hidden"}})})})})]})},"0")})};j.default=Y}}]);
